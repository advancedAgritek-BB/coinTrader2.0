# === exchange ===
exchange:
  name: kraken
  max_concurrency: 3
  request_timeout_ms: 10000

# === trading/base ===
trading:
  enable_execution: true          # make sure the trader loop can place paper orders
  short_selling: true            # unless you really want simulated shorts
  allowed_quotes: [USD, USDT, USDC, EUR]
  min_ticker_volume: 10000
  timeframes: ["1m","5m","15m","1h"]
  min_score: 0.05
  min_confidence: 0.05
  consensus: weighted
  backfill:
    warmup_high_tf: ["1h","4h","1d"]
    deep_low_tf: true        # backfill 1m/5m history for strategies
    deep_days: 30
  hft_enabled: true
  hft_symbols: ["BTC/USD","ETH/USD","SOL/USDC","BONK/USDC","BNB/USDT","SHIB/USDT","PEPE/USD"]   # seed list, can expand
  exclude_symbols: ["AIBTC/USD"]   # remove noisy/synthetic pairs
  require_sentiment: false

filters:
  sentiment:
    enabled: false

# === router ===
router:
  # When signal fusion heavily weights strategies, lower this threshold so
  # scaled scores are not rejected. Defaults to 0.1 when omitted.
  min_accept_score: 0.02        # example value for fusion-heavy setups
  prefer_timeframes: ["5m","15m","1m","1h"]
  require_warm: true
  top_k_per_strategy: 5
  fast_track_score: 0.80        # keep fast-path possible

# === ohlcv cache ===
ohlcv:
  storage_path: crypto_bot/data/ohlcv   # directory for persisted OHLCV data
  tail_overlap_bars: 3                  # overlap bars to avoid gaps when appending
  max_bootstrap_bars: 3000              # limit initial bootstrap to this many bars
  bootstrap_timeframes: ["1m","5m","15m","1h"]
  defer_timeframes: ["4h","1d"]
  warmup_candles:              # auto-adjusts; override with CT_WARMUP_<TF> env vars
    "1m": 300    # CT_WARMUP_1M
    "5m": 300    # CT_WARMUP_5M
    "15m": 300   # CT_WARMUP_15M
    "1h": 200    # CT_WARMUP_1H
    "1d": 100    # CT_WARMUP_1D
  initial_history_candles: 300
  scan_lookback_limit: 1200

# === strategies and params ===
strategies:
  maker_spread:
    enabled: true
    max_spread_bp: 8              # don’t quote if spread > 8 bps
    edge_margin_bp: 3             # required extra edge beyond maker fee
    max_live_quotes: 2
    queue_timeout_ms: 1500        # cancel if sitting too long
    cancel_on_obi_flip: true

  breakout:
    enabled: true
    tf: "5m"
    donchian_len: 40
    keltner_len: 20
    bbw_pct_max: 20               # BB width in bottom 15th percentile
    volume_z_min: 0.0
    atr_mult_stop: 1.2
    atr_mult_tp: 1.2
    max_spread_bp: 10
    time_exit_bars: 12
    min_intensity:
      "1h": 0.01

  mean_bot:
    enabled: true
    tf: "1m"
    ema_len: 50
    z_entry: 2.0
    z_exit: 0.5
    adx_max: 18
    atr_stop_mult: 1.0
    max_spread_bp: 8
    time_exit_bars: 6
    rsi_overbought: 65
    rsi_oversold: 35

  trend_bot:
    enabled: true
    tf: "1m"
    adx_threshold: 15
    trend_ema_fast: 10
    trend_ema_slow: 30

  momentum_bot:
    enabled: true
    tf: "1m"
    volume_z_min: 0.5

  breakout_bot:
    enabled: true
    tf: "1m"
    adx_threshold: 15

  sniper_bot:
    enabled: true
    tf: "1m"

  sniper_solana:
    enabled: true
    tf: "1m"

  grid_bot:
    enabled: true
    tf: "1m"

  micro_scalp_bot:
    enabled: true
    tf: "1m"

  lstm_bot:
    enabled: true
    tf: "1m"

  bounce_scalper:
    enabled: true
    tf: "1m"

  flash_crash_bot:
    enabled: true
    tf: "1m"

  meme_wave_bot:
    enabled: true
    tf: "1m"

  cross_chain_arb_bot:
    enabled: true

  dca_bot:
    enabled: true

  dex_scalper:
    enabled: true

  dip_hunter:
    enabled: true

  meme_sniper:
    enabled: true

  mean_revert:
    enabled: true
    trade_enabled: true

  range_arb_bot:
    enabled: true

  solana_scalping:
    enabled: true

  stat_arb_bot:
    enabled: true

# === fees ===
fees:
  kraken:
    taker_bp: 26    # example 0.26%
    maker_bp: 16    # example 0.16%

# === features ===
features:
  ml: true
  helius: false
  pump_monitor: false
  telegram: true

# Regime model is fetched from Supabase; override fallback URL if needed
model_fallback_url: https://prmhankbfjanqffwjcba.supabase.co/storage/v1/object/public/models/xrpusd_regime_lgbm.pkl

# === telemetry / metrics ===
telemetry:
  batch_summary_secs: 60

adaptive_scan:
  atr_baseline: 0.005
  enabled: true
  max_factor: 10.0
adx_threshold: 15
arbitrage_enabled: true
arbitrage_threshold: 0.005
atr_normalization: true
auto_convert_quote: USDC
runtime:
  fast_start:
    enabled: true
    seed_symbols: ["XRPUSD", "ETH/USDT", "SOL/USDT", "XRP/USDT", "DOGE/USDT"]
    seed_batch_size: 15
    followup_batch_size: 25
  evaluation:
    concurrency: 8
    per_symbol_timeout_s: 8
balance_poll_mod: 1
bandit:
  alpha0: 1
  beta0: 1
  enabled: true
  explore_pct: 0.1
bb_squeeze_pct: 15
bounce_scalper:
  atr_normalization: true
  atr_period: 10
  atr_window: 10
  cooldown_enabled: false
  down_candles: 2
  ema_window: 40
  lookback: 200
  max_concurrent_signals: 8
  min_score: 0.1
  overbought: 75
  oversold: 30
  pattern_timeframe: 1m
  rsi_overbought_pct: 75
  rsi_oversold_pct: 25
  rsi_window: 14
  stop_loss_atr_mult: 1.0
  take_profit_atr_mult: 2.0
  trend_ema_fast: 8
  trend_ema_slow: 18
  up_candles: 2
  vol_window: 15
  vol_zscore_threshold: 0.8
  volume_multiple: 1.5
  zscore_threshold: 1.0
breakout:
  adx_threshold: 15
  atr_buffer_mult: 0.03
  bb_length: 10
  bb_std: 1.5
  dc_length: 15
  kc_length: 10
  kc_mult: 1.0
  momentum_filter: false
  squeeze_threshold: 0.01
  vol_multiplier: 0.5
  volume_window: 15
  min_intensity:
    "1h": 0.01
cycle_bias:
  enabled: false
  mvrv_url: https://api.example.com/mvrv
  nupl_url: https://api.example.com/nupl
  sopr_url: https://api.example.com/sopr
cycle_lookback_limit: 150
dca:
  enabled: false
  max_entries: 3
  size_multiplier: 1.0
dip_hunter:
  adx_threshold: 25
  adx_window: 14
  atr_normalization: true
  bb_window: 20
  cooldown_enabled: false
  dip_bars: 3
  dip_pct: 0.03
  ema_trend: 200
  ml_weight: 0.5
  rsi_oversold: 25
  rsi_window: 14
  vol_mult: 1.5
  vol_window: 20
stat_arb_bot:
  pairs:
    - SOL/USDC,ETH/USDC
  z_threshold: 2.0
  window: 50
drawdown_penalty_coef: 0.2
ensemble_min_conf: 0.01
exchange_market_types:
- spot
- futures
excluded_symbols:
- ABC/USDT
- XYZ/USDC
exec:
  allow_market_orders: true
  order_retry_interval: 3
execution_mode: dry_run  # cex | onchain | auto | dry_run
exit_strategy:
  default_sl_pct: 0.015
  default_tp_pct: 0.07
  fib_tp_enabled: true
  min_gain_to_trail: 0.01
  partial_levels:
  - 25
  - 50
  - 75
  - 100
  scale_out: true
  trailing_stop_factor: 1.2
  trailing_stop_pct: 0.005
force_websocket_history: false
kraken:
  use_private_ws: false  # set true only if private WS feeds are required
priority_fee_cap_micro_lamports: 50
gecko_limit: 10
grid_bot:
  arbitrage_pairs:
  - XRPUSD
  - SOL/USDC
  arbitrage_threshold: 0.001
  atr_normalization: true
  atr_period: 10
  breakout_mult: 1.0
  cooldown_bars: 1
  dynamic_grid: true
  leverage: 3
  max_active_legs: 12
  min_range_pct: 0.0003
  range_window: 15
  spacing_factor: 0.2
  trend_ema_fast: 40
  trend_ema_slow: 150
  use_ml_center: true
  vol_zscore_threshold: 1.5
  volume_filter: false
  volume_ma_window: 15
  volume_multiple: 1.0
hidden_limit: true
indicator_lookback: 14
liquidity_check: true
liquidity_depth: 5
max_liquidity_usage: 0.8
listing_date_concurrency: 5
log_to_google: true
loop_interval_minutes: 0.05
loop_interval_seconds: 0.05
hft_mode: true
max_age_days: 90
max_change_pct: 20
max_concurrent_ohlcv: 8
http_pool_size: 25
max_concurrent_tickers: 20
max_latency_ms: 500
max_ohlcv_failures: 2
max_open_trades: 5
max_parallel: 50
max_slippage_pct: 0.2
max_spread_pct: 10
max_vol: 50000000
max_ws_limit: 200
meme_wave_bot:
  sentiment_thr: 0.6
  twitter_query: null
  vol_spike_thr: 2.0
meme_wave_sniper:
  enabled: true
  execution:
    dry_run: false
  pool:
    interval: 3
    raydium_program_id: EhhTK0i58FmSPrbr30Y8wVDDDeWGPAHDq6vNru6wUATk
    url: https://mainnet.helius-rpc.com/v1/?api-key=YOUR_KEY
    websocket_url: wss://mainnet.helius-rpc.com/?api-key=${HELIUS_KEY}
  risk:
    daily_loss_cap: 2.0
    max_concurrent: 15
  risk_file: crypto_bot/logs/sniper_risk.json
  safety:
    min_liquidity: 50
  scoring:
    weight_liquidity: 0.8
    weight_social: 0.7
    weight_tx: 1.2
yamlmeme_sniper:
  min_pump_prob: 0.6  # Assessment threshold
  max_dev_hold_pct: 20
  min_liquidity_usd: 5000
  twitter_sentiment_min: 70
  helius_api_key: your_key_here  # For metadata
mempool_monitor:
  action: reprice
  enabled: true
  reprice_multiplier: 1.1
  suspicious_fee_threshold: 20
meta_selector:
  enabled: true
metrics_backend: csv
metrics_enabled: true
metrics_output_file: crypto_bot/logs/metrics.csv
micro_scalp_bot:
  atr_period: 10
  confirm_bars: 0
  ema_fast: 2
  ema_slow: 4
  fresh_cross_only: false
  imbalance_filter: false
  imbalance_penalty: 0.1
  imbalance_ratio: 0
  min_atr_pct: 0.0005
  min_momentum_pct: 0.0
  min_vol_z: -2.0
  trend_fast: 15
  trend_filter: false
  trend_slow: 40
  trend_timeframe: 1m
  vol_window: 15
  volume_window: 15
  wick_pct: 0.1
min_confidence_score: 0.0005
min_consistent_agreement: 1
min_cooldown: 0
min_history_fraction: 0.1
min_symbol_age_days: 0
min_symbol_score: 0
# Set to true only if coinTrader_Trainer and models are installed
ml_enabled: true
ml_signal_model:
  enabled: true
  weight: 0.9
ohlcv_batch_size: 10
ohlcv_snapshot_frequency_minutes: 720
ohlcv_snapshot_limit: 500
ohlcv_timeout: 5
redis_url: null
onchain_default_quote: USDC
onchain_min_volume_usd: 5000
onchain_symbols: []
optimization:
  enabled: true
  interval_days: 0.1
  parameter_ranges:
    trend_bot:
      stop_loss:
      - 0.01
      take_profit:
      - 0.05
portfolio_rotation:
  enabled: true
  interval_days: 0.5
  rebalance_threshold: 0.05
  scoring_method: sharpe
  top_assets: 20
  log_scores_verbose: false
preferred_chain: solana
primary_exchange: kraken
solana_rpc: https://api.mainnet-beta.solana.com  # Custom endpoint
pyth:
  enabled: true
  program_id: FsJ3A3u2vn5cTVofAjvy6qM3HrjTXg5Gs1Y8D6fCt3m
  solana_endpoint: https://api.mainnet-beta.solana.com
  solana_ws_endpoint: wss://api.mainnet-beta.solana.com
pyth_quotes:
- USDC
quiet_mode: false
refresh_pairs:
  allowed_quote_currencies: []
  blacklist_assets: []
  min_quote_volume_usd: 1000
  refresh_interval: 30m
  top_k: 100
regime_return_period: 3
regime_timeframes:
- 30s
- 1m
- 5m
- 15m
# === risk & sizing ===
risk:
  require_sentiment: false        # unblock while you have no sentiment feed
  atr_long_window: 40
  atr_period: 10
  atr_short_window: 10
  max_drawdown: 0.2
  max_volatility_factor: 3
  min_atr_pct: 0.0005
  min_expected_value: 0.0
  default_expected_value: 0.1
  min_volume: 0.0001
  stop_loss_atr_mult: 1.0
  stop_loss_pct: 0.01
  take_profit_atr_mult: 3.0
  take_profit_pct: 0.1
  volume_threshold_ratio: 0.01
  win_rate_threshold: 0.4
  win_rate_boost_factor: 1.5
  min_score_to_trade: 0.02      # was 0.15
  min_votes: 1                  # was 2

execution:
  mode: dry_run                 # keep paper until confirmed
  stake_usd: 50
  min_price: 0.00000001
  min_notional: 10              # safer for Kraken spot
  max_positions: 5
rl_selector:
  enabled: true
rsi_overbought_pct: 80
rsi_oversold_pct: 25
safety:
  max_error_count: 10
  restart_on_error: true
scalp_timeframe: 1m
scan_deep_top: 30
scan_in_background: true
scan_lookback_limit: 1200
scan_markets: true
scoring:
  lookback_bars: 30
  method: win_rate
  use_numba_scoring: true
scoring_weights:
  regime_confidence: 0.15
  spread_penalty: -0.05
  strategy_regime_strength: 0.25
  strategy_score: 0.5
  symbol_score: 0.05
  volume_score: 0.05
secondary_exchange: coinbase
sentiment_filter:
  require_sentiment: false  # treat missing sentiment as neutral; CT_REQUIRE_SENTIMENT=false bypasses
  bull_fng: 50
  bull_sentiment: 45
  min_fng: 20  # Lower if current FNG is blocking
  min_sentiment: 40
signal_fusion:
  enabled: false
  fusion_method: max            # was weight
  min_confidence: 0.0
  # weights retained but no longer suppress the max
  strategies:
    - [momentum_bot, 0.75]
    - [trend_bot,   0.25]
signal_threshold: 0.0001
signal_weight_optimizer:
  enabled: true
  learning_rate: 0.05
  min_weight: 0.01
sl_mult: 1.0
sl_pct: 0.015
sniper_solana:
  atr_window: 10
  breakout_pct: 0.01
  fallback_atr_mult: 1.2
  fallback_volume_mult: 1.0
  max_history: 20
  price_fallback: true
flash_crash_bot:
  drop_thr: -0.10   # 10% 1m drop
  vol_thr: 5.0      # volume spike multiplier
  tp_thr: 0.05      # take‑profit reversion threshold
cross_chain_arb_bot:
  pair: SOL/USDC
  spread_threshold: 0.05
  fee_threshold: 30
lstm_bot:
  model_path: crypto_bot/models/lstm_model.pth
  sequence_length: 60
  threshold_pct: 0.01
solana_scalping:
  macd_fast: 10
  macd_signal: 8
  macd_slow: 24
  overbought: 75.0
  oversold: 25.0
  rsi_window: 12
solana_scanner:
  api_keys:
    bitquery: YOUR_KEY
    moralis: YOUR_KEY
    lunarcrush_api_key: YOUR_KEY
  enabled: false
  gecko_search: true
  interval_minutes: 0.1
  max_tokens_per_scan: 50
  min_volume_usd: 10000
solana_slippage_bps: 10
strategy_allocation:
  grid_bot: 0.2
  trend_bot: 0.2
strategy_evaluation_mode: single
strategy_router:
  # range_arb_bot runs globally and is appended automatically; no need to list it under regimes
  bandit_enabled: true
  fusion_enabled: true
  bounce_timeframe: 5m
  breakout_timeframe: 15m
  fast_path:
    enabled: true
    adx_threshold: 25
    bbw_pct_max: 5
    vol_z_min: -1.0
    min_score: 0.02
  mean_reverting_timeframe: 1h
  flash_crash_timeframe: 1m
  min_confidence: 0.0005
  regimes:
    bounce:
    - bounce_scalper
    - lstm_bot
    breakout:
    - breakout_bot
    - breakout
    - lstm_bot
    dip_hunter:
    - dip_hunter
    - lstm_bot
    mean-reverting:
    - dip_hunter
    - mean_bot
    - stat_arb_bot
    - flash_crash_bot
    - lstm_bot
    scalp:
    - micro_scalp_bot
    - lstm_bot
    sideways:
    - grid_bot
    - cross_chain_arb_bot
    - lstm_bot
    trending:
    - trend_bot
    - momentum_bot
    - lstm_bot
    volatile:
    - sniper_bot
    - momentum_bot
    - meme_wave_bot
    - cross_chain_arb_bot
    - flash_crash_bot
    - lstm_bot
  scalp_timeframe: 1m
  sideways_timeframe: 1h
  trending_timeframe: 1h
  volatile_timeframe: 1m
yamlrouter:
  min_score: 0.20
  min_confidence: 0.30
  consensus: weighted
  regimes:
    unknown:  # Fallback strategy for unknown
      - mean_bot
      - grid_bot
symbol: XRPUSD
symbol_batch_size: 50
ohlcv_chunk_size: 20
symbol_filter:
  change_pct_percentile: 10
  correlation_max_pairs: 200
  http_timeout: 5
  initial_timeframes:
  - 1m
  - 5m
  kraken_batch_size: 200
  log_ticker_exceptions: true
  max_concurrent_ohlcv: 10
  max_correlation: 0.9
  max_spread_pct: 8
  min_volume_usd: 10000
  ohlcv_batch_size: 10
  ticker_retry_attempts: 5
  uncached_volume_multiplier: 1.5
  volume_percentile: 5
symbol_refresh_minutes: 5
symbol_score_weights:
  age: 0.1
  change: 0.3
  latency: 0.05
  liquidity: 0.1
  spread: 0.15
  volume: 0.3
symbols: []
tax_tracking:
  enabled: true
  export_path: crypto_bot/logs/tax_trades.csv
telegram:
  chat_admins: 827777274
  chat_id: 827777274
  command_cooldown: 3
  enabled: true
  max_messages_per_minute: 20
  message_interval: 1.0
  token: your_telegram_token
  trade_updates: true
  connect_timeout: 10.0
  read_timeout: 20.0
  connection_pool_size: 8
telegram_ctl:
  enabled: true
  update_interval: 30
testing_mode: true
enable_token_overrides: true
ticker_backoff_initial: 2
ticker_backoff_max: 60
ticker_rate_limit: null
timeframes: ['1m','5m','15m','1h']
backfill_days:
  '1m': 2
  '5m': 3
  '15m': 10
  '1h': 30
deep_backfill_days:
  '1m': 7
  '5m': 14
  '15m': 60
  '1h': 180
allowed_quotes: ['USD','USDT','USDC','EUR']
hft: true
token_registry:
  refresh_interval_minutes: 15
top_n_symbols: 20
top_n_symbols_total: 20  # overall cap across all quotes after per-quote limit
tp_mult: 2.0
tp_pct: 0.1
trade_size_pct: 0.05
trend_bot:
  atr_period: 10
  k: 0.8
  adx_threshold: 15
  trend_ema_fast: 10
  trend_ema_slow: 30
twap_enabled: true
twap_interval_seconds: 5
twap_slices: 6
use_ml_regime_classifier: false
use_per_pair_models: false
use_websocket: true
volatility_filter:
  max_funding_rate: 0.5  # Allow hotter funding
  min_atr_pct: 0.00001  # Include flatter markets
voting_enabled: false  # Run each strategy independently unless enabled
voting_strategies:
  strategies:
    - trend_bot
    - momentum_bot
    - mean_revert
    - breakout_bot
    - micro_scalp_bot
  weights:
    trend_bot: 1.0
    momentum_bot: 1.0
    mean_revert: 0.8
    breakout_bot: 0.6
    micro_scalp_bot: 0.5
  min_agree_fraction: 0.25  # Easier consensus
  quorum: 1
  min_agreeing_votes: 1
wallet_address: your_wallet
ws_failures_before_disable: 1
ws_ping_interval: 5

evaluation:
  workers: 4
  gate_ttl_sec: 120
  fast_start:
    enabled: true
    seed_symbols: ['XRPUSD','ETH/USDT','SOL/USDT','XRP/USDT','DOGE/USDT']
    immediate: true

onchain_watchers:
  enabled: false   # hard off in CEX mode

strict_cex: true   # only symbols the exchange actually lists
skip_symbol_filters: false
denylist_symbols: ['AIBTC/USD','AIBTC:USD','AIBTC/EUR','AIBTC:EUR','BTC/USD.P','ETH/USD.P']
